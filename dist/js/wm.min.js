function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e){var n,i,s,r,o,l,c,u,a,h,p,f,d,v,y,m,_,b,w,C,g,k,x,L,E,R;1e4,100,C=function(t,n,i,s,r){var o,l,c,u;if((o=e.createElement(t)).className=i,"string"==typeof s?o.innerHTML=s:r=s,r)for(l in r)if(u=r[l],"css"===l)for(c in u)o.style[c]=u[c];else o.setAttribute(l,u);return null!=n&&n.appendChild(o),o},k=function(t,n){var i;return i=e.createTextNode(t),n.appendChild(i),i},E=function(t,e){t.setAttribute("role",e)},R=function(t,e){var n,i,s;for(i=0,s=t.length;i<s;i++)n=t[i],E(n,e)},function(t){return t.classList.contains("wm-active")},L=function(t,e){t.classList[e?"add":"remove"]("wm-active")},g=function(t){var n;return(n=e.createEvent("Event")).initEvent(t,!1,!0),n},a=function(){function t(e){var n;_classCallCheck(this,t),this.el=e,n=this,this.list={},this.dispatcher=function(t){var e,i,s,r,o;for(o=[],e=0,i=(r=n.list[t.type]).length;e<i;e++)s=r[e],o.push(s.call(n,t));return o}}return t.prototype.on=function(t,e){return this.list[t]||(this.list[t]=[],this.el.addEventListener(t,this.dispatcher,!1)),this.list[t].push(e),this},t.prototype.off=function(t,e){var n,i;return this.list[t]&&-1!==(i=(n=this.list[t]).indexOf(e))&&(n.splice(i,1),n.length||(this.list[t]=void 0,this.el.removeEventListener(t,this.dispatcher,!1))),this},t.prototype.trigger=function(t){return"string"==typeof t&&(t=g(t)),this.el.dispatchEvent(t),this},t}(),l=function(){function n(t){_classCallCheck(this,n),t=t||{},this.parent=t.node||e.body,this.zindex=t.owner?t.owner.zindex+1:0,this.owner=t.owner,this.list=[],this.modal=!(!t.modal&&!t.owner),this.desktop=null,this.overlay=null,this.active=!0}return n.prototype._getClientSize=function(){var n;return n={},e.body&&(this.desktop&&this.desktop.parentNode||(this.desktop=C("div",this.parent,"wm-desktop")),n="function"==typeof t.getComputedStyle?t.getComputedStyle(this.desktop):void 0),{width:parseInt(n.width)||t.innerWidth,height:parseInt(n.height)||t.innerHeight}},n.prototype._moveElement=function(t,e,n){var i;"number"==typeof e&&(e+="px"),"number"==typeof n&&(n+="px"),(i=t.style).left=e,i.top=n,this._adjustLocation(t)},n.prototype._resizeElement=function(t,e,n){var i;"number"==typeof e&&(e+="px"),"number"==typeof n&&(n+="px"),(i=t.style).width=e||"",i.height=n||"",this._adjustLocation(t)},n.prototype._moveToCentre=function(t){var e,n,i,s;e=t.getBoundingClientRect(),i=((n=this._getClientSize()).width-e.width)/2|0,s=(n.height-e.height)/2|0,this._moveElement(t,i,s)},n.prototype._adjustLocation=function(t){var e,n,i,s;i=t.offsetLeft,s=t.offsetTop,e=t.getBoundingClientRect(),n=this._getClientSize(),i+e.width>n.width&&(i=n.width-e.width),i<0&&(i=0),s+e.height>n.height&&(s=n.height-e.height),s<0&&(s=0),t.style.left=i+"px",t.style.top=s+"px"},n.prototype.indexOf=function(t){var e,n,i,s;for(e=n=0,i=(s=this.list).length;n<i;e=++n)if(s[e].equals(t))return e;return-1},n.prototype.newDialog=function(t,n){var i,s,r,o;if(this.list.length>=99)throw"Maximum windows exceeded";if(this.modal&&!this.overlay&&(this.overlay=C("div",this.parent,"wm-modal",{css:{zIndex:this._zIndex(0)}})),t)return null==(o=null!=(null!=n?n.title:void 0)?n.title:n)&&(o=e.title),s=C("form",this.parent,"wm-dlg"),r=C("div",s,"wm-title"),k(o,r),C("div",s,"wm-body",t),i=new c(this,s),this.list.push(i),this._update(),i},n.prototype.destroy=function(){var t,e,n,i;for(e=0,n=(i=this.list).length;e<n;e++)t=i[e],this.parent.removeChild(t.el);this._destroyInternal()},n.prototype._deleteDialog=function(t){var e;-1!==(e=this.indexOf(t))&&(this.parent.removeChild(t.el),this.list.splice(e,1),this._update(),0===this.list.length&&this._destroyInternal())},n.prototype._destroyInternal=function(){this.desktop&&(this.parent.removeChild(this.desktop),this.desktop=null),this.overlay&&(this.parent.removeChild(this.overlay),this.overlay=null)},n.prototype._bringToTop=function(t,e){var n;-1!==(n=this.indexOf(t))&&(this.list.push(this.list.splice(n,1)[0]),this._update(e))},n.prototype._zIndex=function(t){return 1e4+100*this.zindex+t},n.prototype._update=function(t){var e,n,i,s,r;for(this._notifyOwner(),r=this.list.length-1,e=n=0,i=(s=this.list).length;n<i;e=++n)s[e]._setState(this._zIndex(e+1),this.active&&e>=r,t)},n.prototype._notify=function(t){var e;if(e=0===t.list.length,this.active!==e)return this.active=e,this._update()},n.prototype._notifyOwner=function(){if(this.owner)return this.owner._notify(this)},n}(),i=function(t){function n(i,s){var r,o,l,c,u,a,h;_classCallCheck(this,n);var p=_possibleConstructorReturn(this,t.call(this,s));return r=!1,u=0,a=0,h=s.querySelector(".wm-title"),p.close=C("button",h,"wm-close",{title:"Close"}),p.close.addEventListener("click",function(t){t.preventDefault(),p.trigger("wm.close")},!1),o=function(t){var n,i;0===t.button&&t.target.isSameNode(h)&&(i=h.getBoundingClientRect(),n=s.getBoundingClientRect(),r=!0,u=n.left-i.left-t.offsetX,a=n.top-i.top-t.offsetY,e.addEventListener("mousemove",l,!1),e.addEventListener("mouseup",c,!1),t.preventDefault())},l=function(t){r&&(i._moveElement(s,u+t.clientX,a+t.clientY),t.preventDefault())},c=function(){var t;r&&(e.removeEventListener("mousemove",l,!1),e.removeEventListener("mouseup",c,!1),t=s.getBoundingClientRect(),s.style.left=t.left+"px",s.style.top=t.top+"px",r=!1)},h.addEventListener("mousedown",o,!1),p}return _inherits(n,t),n}(a),v=function(t){function e(n){return _classCallCheck(this,e),_possibleConstructorReturn(this,t.call(this,n))}return _inherits(e,t),e}(o=function(e){function n(i,s,r){_classCallCheck(this,n);var o=_possibleConstructorReturn(this,e.call(this,i));return(r||i).classList.add("wm-ctl"),null!=s&&E(i,s),Object.defineProperty(o,"visible",{get:function(){return"hidden"!==t.getComputedStyle(o.el).visibility},set:function(t){return o.el.style.visibility=t?"visible":"hidden"}}),o}return _inherits(n,e),n}(a)),n=function(t){function e(n){var i;_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this,n,"button"));return n.classList.add("wm-btn"),(i=n.getAttribute("type"))||(i=n.classList.contains("wm-btn-ok")?"submit":"button",n.type=i),s}return _inherits(e,t),e}(f=function(t){function e(n,i,s){_classCallCheck(this,e);var r=_possibleConstructorReturn(this,t.call(this,n,i,s));return n.classList.add("wm-ctl-form"),Object.defineProperty(r,"value",{get:function(){return r.el.value},set:function(t){return r.el.value=t}}),Object.defineProperty(r,"disabled",{get:function(){return r.el.disabled},set:function(t){return r.el.disabled=t}}),r}return _inherits(e,t),e}(o)),s=function(t){function e(n){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,n,"checkbox"));return n.classList.add("wm-chk"),Object.defineProperty(i,"checked",{get:function(){return i.el.checked},set:function(t){return i.el.checked=t}}),i}return _inherits(e,t),e}(f),_=function(t){function e(n){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,n,"radio"));return n.classList.add("wm-radio"),Object.defineProperty(i,"checked",{get:function(){return i.el.checked},set:function(t){return i.el.checked=t}}),i}return _inherits(e,t),e}(f),m=function(t){function e(n){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,n,"progressbar"));return n.classList.add("wm-progress"),Object.defineProperty(i,"max",{get:function(){return i.el.max},set:function(t){return i.el.max=t}}),i}return _inherits(e,t),e}(f),r=function(t){function e(n){var i,s,r;_classCallCheck(this,e),i=n,r=n.parentNode,s=C("span",null,"wm-cmb",i.outerHTML),r.insertBefore(s,i),r.removeChild(i),n=s.querySelector("select");var o=_possibleConstructorReturn(this,t.call(this,n,null,s));return o.outer=s,o}return _inherits(e,t),e}(f),u=function(t){function e(n){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,n));return n.classList.add("wm-edit"),i}return _inherits(e,t),e}(w=function(t){function e(n){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,n));return n.classList.add("wm-textbox"),i}return _inherits(e,t),e}(f)),y=function(t){function e(n){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,n));return n.classList.add("wm-memo"),i}return _inherits(e,t),e}(w),d=function(t){function e(n){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,n));return n.classList.add("wm-grp"),i}return _inherits(e,t),e}(o),b=function(t){function e(n){var i,s,r,o,l,c;_classCallCheck(this,e);var u=_possibleConstructorReturn(this,t.call(this,n));if(c=n.querySelectorAll(".wm-tab>li"),o=n.querySelectorAll(".wm-tabpage>li"),!c.length)return _possibleConstructorReturn(u);for(E(n.querySelector(".wm-tab"),"tablist"),R(c,"tab"),R(o,"tabpanel"),i=s=0,r=c.length;s<r;i=++s)l=c[i],o[i]&&function(t){l.addEventListener("click",function(){var e,n,i,s;for(n=s=0,i=c.length;s<i;n=++s)c[n],e=n===t,L(c[n],e),L(o[n],e)},!1)}(i);return L(c[0],!0),o[0]&&L(o[0],!0),u}return _inherits(e,t),e}(o),p=function(t){function e(n){return _classCallCheck(this,e),_possibleConstructorReturn(this,t.call(this,n,"footer"))}return _inherits(e,t),e}(o),x={".wm-lbl":v,".wm-btn,button":n,"input[type=checkbox]":s,"input[type=radio]":_,select:r,"input:not([type]),input[type=text],input[type=password],input[type=email]":u,textarea:y,fieldset:d,".wm-tabs":b,progress:m,".wm-footer":p},h=function(){function t(){_classCallCheck(this,t),this.lastIndex=0,this.map={},this.attr="data-fmap-"+Date.now()}return t.prototype.get=function(t){var e;return(e=t.getAttribute(this.attr))&&this.map[e]||null},t.prototype.set=function(t,e){var n;(n=t.getAttribute(this.attr))||(n=++this.lastIndex,t.setAttribute(this.attr,n)),this.map[n]=e},t}(),c=function(e){function n(t,s){var r,o,l,c,u,a,p;_classCallCheck(this,n);var f=_possibleConstructorReturn(this,e.call(this,s));for(p in f.owner=t,f.active=!1,f.centre=!1,f.map=new h,f.onResize=function(){f._autoMove()},E(s,t.modal?"alertdialog":"dialog"),s.addEventListener("mousedown",function(t){f._activate(t)},!1),new i(t,s).on("wm.close",function(){f.close()}),o=s.querySelector(".wm-body"),x)for(r=x[p],c=0,u=(a=o.querySelectorAll(p)).length;c<u;c++)l=new r(a[c]),f._accessData(l.el,l);return f.bind(".wm-ok,.wm-cancel",function(t){f.close(t.target.classList.contains("wm-ok"))}),f._setCentre(!0),s.classList.add("wm-shown"),f}return _inherits(n,e),n.prototype.equals=function(t){return this.el.isSameNode(t.el)},n.prototype.close=function(e){var n;return(n=g("wm.closing")).reason=e?"ok":"cancel",this.trigger(n),!1===n.defaultPrevented&&(this.owner._deleteDialog(this),t.removeEventListener("resize",this.onResize,!1),this.trigger("wm.closed")),this},n.prototype.move=function(t,e){var n;return n=!(("number"==typeof t||t)&&("number"==typeof e||e)),this._setCentre(n),n||this.owner._moveElement(this.el,t,e),this},n.prototype.resize=function(t,e){return this.owner._resizeElement(this.el,t,e),this._autoMove(),this},n.prototype.activate=function(){return this._activate(),this},n.prototype.find=function(t){var e;return(e=this.el.querySelector(t))&&this._accessData(e)},n.prototype.findAll=function(t){var e,n,i,s,r,o;for(o=[],i=0,s=(r=this.el.querySelectorAll(t)).length;i<s;i++)n=r[i],null!=(e=this._accessData(n))&&o.push(e);return o},n.prototype.bind=function(t,e,n){return"string"!=typeof e&&(n=e,e="click"),this.findAll(t).forEach(function(t){t.on(e,n)}),this},n.prototype.unbind=function(t,e,n){return"string"!=typeof e&&(n=e,e="click"),this.findAll(t).forEach(function(t){t.off(e,n)}),this},n.prototype._accessData=function(t,e){if(void 0===e)return this.map.get(t);this.map.set(t,e)},n.prototype._activate=function(t){this.owner._bringToTop(this,t)},n.prototype._isChildOrSelf=function(t){return this.el.isSameNode(t)||this.el.contains(t)},n.prototype._setState=function(t,e,n){var i;this.el.style.zIndex!==t&&(this.el.style.zIndex=t),this.active!==e&&(this.active=e,L(this.el,e),e&&(null!=n?n.target.focus():null!=(i=this.el.querySelector(".wm-ctl-form"))&&i.focus()))},n.prototype._autoMove=function(){this.centre&&this.owner._moveToCentre(this.el)},n.prototype._setCentre=function(e){this.center!==e&&(this.centre=e,e?t.addEventListener("resize",this.onResize,!1):t.removeEventListener("resize",this.onResize,!1),this._autoMove())},n}(a),t.Desktop=l}(window,document);
//# sourceMappingURL=wm.min.js.map
