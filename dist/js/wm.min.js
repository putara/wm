function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e){var i,n,s,r,o,l,u,c,h,a,p,f,d,v,_,m,y,w,C,b,g,k,x,L,R,E;1e4,100,b=function(t,i,n,s,r){var o,l,u,c;if((o=e.createElement(t)).className=n,"string"==typeof s?o.innerHTML=s:r=s,r)for(l in r)if(c=r[l],"css"===l)for(u in c)o.style[u]=c[u];else o.setAttribute(l,c);return null!=i&&i.appendChild(o),o},k=function(t,i){var n;return n=e.createTextNode(t),i.appendChild(n),n},R=function(t,e){t.setAttribute("role",e)},E=function(t,e){var i,n,s;for(n=0,s=t.length;n<s;n++)i=t[n],R(i,e)},function(t){return t.classList.contains("wm-active")},L=function(t,e){t.classList[e?"add":"remove"]("wm-active")},g=function(t){var i;return(i=e.createEvent("Event")).initEvent(t,!1,!0),i},h=function(){function t(e){var i;_classCallCheck(this,t),this.el=e,i=this,this.list={},this.dispatcher=function(t){var e,n,s,r,o;for(o=[],e=0,n=(r=i.list[t.type]).length;e<n;e++)s=r[e],o.push(s.call(i,t));return o}}return t.prototype.on=function(t,e){return this.list[t]||(this.list[t]=[],this.el.addEventListener(t,this.dispatcher,!1)),this.list[t].push(e),this},t.prototype.off=function(t,e){var i,n;return this.list[t]&&-1!==(n=(i=this.list[t]).indexOf(e))&&(i.splice(n,1),i.length||(this.list[t]=void 0,this.el.removeEventListener(t,this.dispatcher,!1))),this},t.prototype.trigger=function(t){return"string"==typeof t&&(t=g(t)),this.el.dispatchEvent(t),this},t}(),l=function(){function i(t){_classCallCheck(this,i),t=t||{},this.parent=t.node||e.body,this.zindex=t.owner?t.owner.zindex+1:0,this.owner=t.owner,this.list=[],this.modal=!(!t.modal&&!t.owner),this.desktop=null,this.overlay=null,this.active=!0}return i.prototype._getClientSize=function(){var i;return i={},e.body&&(this.desktop&&this.desktop.parentNode||(this.desktop=b("div",this.parent,"wm-desktop")),i="function"==typeof t.getComputedStyle?t.getComputedStyle(this.desktop):void 0),{width:parseInt(i.width)||t.innerWidth,height:parseInt(i.height)||t.innerHeight}},i.prototype._moveElement=function(t,e,i){var n;"number"==typeof e&&(e+="px"),"number"==typeof i&&(i+="px"),(n=t.style).left=e,n.top=i,this._adjustLocation(t)},i.prototype._resizeElement=function(t,e,i){var n;"number"==typeof e&&(e+="px"),(n=t.style).width=e,null!=i&&("number"==typeof i&&(i+="px"),n.height=i),this._adjustLocation(t)},i.prototype._moveToCentre=function(t){var e,i,n,s;e=t.getBoundingClientRect(),n=((i=this._getClientSize()).width-e.width)/2|0,s=(i.height-e.height)/2|0,this._moveElement(t,n,s)},i.prototype._adjustLocation=function(t){var e,i,n,s;n=t.offsetLeft,s=t.offsetTop,e=t.getBoundingClientRect(),i=this._getClientSize(),n+e.width>i.width&&(n=i.width-e.width),n<0&&(n=0),s+e.height>i.height&&(s=i.height-e.height),s<0&&(s=0),t.style.left=n+"px",t.style.top=s+"px"},i.prototype.indexOf=function(t){var e,i,n,s;for(e=i=0,n=(s=this.list).length;i<n;e=++i)if(s[e].equals(t))return e;return-1},i.prototype.newDialog=function(t,i){var n,s,r,o;if(this.list.length>=99)throw"Maximum windows exceeded";if(this.modal&&!this.overlay&&(this.overlay=b("div",this.parent,"wm-modal",{css:{zIndex:this._zIndex(0)}})),t)return null==(o=null!=(null!=i?i.title:void 0)?i.title:i)&&(o=e.title),s=b("form",this.parent,"wm-dlg"),r=b("div",s,"wm-title"),k(o,r),b("div",s,"wm-body",t),n=new u(this,s),this.list.push(n),this._update(),n},i.prototype.destroy=function(){var t,e,i,n;for(e=0,i=(n=this.list).length;e<i;e++)t=n[e],this.parent.removeChild(t.el);this._destroyInternal()},i.prototype._deleteDialog=function(t){var e;-1!==(e=this.indexOf(t))&&(this.parent.removeChild(t.el),this.list.splice(e,1),this._update(),0===this.list.length&&this._destroyInternal())},i.prototype._destroyInternal=function(){this.desktop&&(this.parent.removeChild(this.desktop),this.desktop=null),this.overlay&&(this.parent.removeChild(this.overlay),this.overlay=null)},i.prototype._bringToTop=function(t,e){var i;-1!==(i=this.indexOf(t))&&(this.list.push(this.list.splice(i,1)[0]),this._update(e))},i.prototype._zIndex=function(t){return 1e4+100*this.zindex+t},i.prototype._update=function(t){var e,i,n,s,r;for(this._notifyOwner(),r=this.list.length-1,e=i=0,n=(s=this.list).length;i<n;e=++i)s[e]._setState(this._zIndex(e+1),this.active&&e>=r,t)},i.prototype._notify=function(t){var e;if(e=0===t.list.length,this.active!==e)return this.active=e,this._update()},i.prototype._notifyOwner=function(){if(this.owner)return this.owner._notify(this)},i}(),n=function(t){function i(n,s){var r,o,l,u,c,h,a;_classCallCheck(this,i);var p=_possibleConstructorReturn(this,t.call(this,s));return r=!1,c=0,h=0,a=s.querySelector(".wm-title"),p.close=b("button",a,"wm-close",{title:"Close"}),p.close.addEventListener("click",function(){p.trigger("wm.close")},!1),o=function(t){var i,n;0===t.button&&t.target.isSameNode(a)&&(n=a.getBoundingClientRect(),i=s.getBoundingClientRect(),r=!0,c=i.left-n.left-t.offsetX,h=i.top-n.top-t.offsetY,e.addEventListener("mousemove",l,!1),e.addEventListener("mouseup",u,!1),t.preventDefault())},l=function(t){r&&(n._moveElement(s,c+t.clientX,h+t.clientY),t.preventDefault())},u=function(){var t;r&&(e.removeEventListener("mousemove",l,!1),e.removeEventListener("mouseup",u,!1),t=s.getBoundingClientRect(),s.style.left=t.left+"px",s.style.top=t.top+"px",r=!1)},a.addEventListener("mousedown",o,!1),p}return _inherits(i,t),i}(h),v=function(t){function e(i){return _classCallCheck(this,e),_possibleConstructorReturn(this,t.call(this,i))}return _inherits(e,t),e}(o=function(t){function e(i,n,s){_classCallCheck(this,e);var r=_possibleConstructorReturn(this,t.call(this,i));return(s||i).classList.add("wm-ctl"),null!=n&&R(i,n),r}return _inherits(e,t),e}(h)),i=function(t){function e(i){var n;_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this,i,"button"));return i.classList.add("wm-btn"),(n=i.getAttribute("type"))||(n=i.classList.contains("wm-btn-ok")?"submit":"button",i.type=n),s}return _inherits(e,t),e}(f=function(t){function e(i,n,s){_classCallCheck(this,e);var r=_possibleConstructorReturn(this,t.call(this,i,n,s));return i.classList.add("wm-ctl-form"),Object.defineProperty(r,"value",{get:function(){return r.el.value},set:function(t){return r.el.value=t}}),r}return _inherits(e,t),e}(o)),s=function(t){function e(i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,i,"checkbox"));return i.classList.add("wm-chk"),Object.defineProperty(n,"checked",{get:function(){return n.el.checked},set:function(t){return n.el.checked=t}}),n}return _inherits(e,t),e}(f),y=function(t){function e(i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,i,"radio"));return i.classList.add("wm-radio"),Object.defineProperty(n,"checked",{get:function(){return n.el.checked},set:function(t){return n.el.checked=t}}),n}return _inherits(e,t),e}(f),m=function(t){function e(i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,i,"progressbar"));return i.classList.add("wm-progress"),Object.defineProperty(n,"max",{get:function(){return n.el.max},set:function(t){return n.el.max=t}}),n}return _inherits(e,t),e}(f),r=function(t){function e(i){var n,s,r;_classCallCheck(this,e),n=i,r=i.parentNode,s=b("span",null,"wm-cmb",n.outerHTML),r.insertBefore(s,n),r.removeChild(n),i=s.querySelector("select");var o=_possibleConstructorReturn(this,t.call(this,i,null,s));return o.outer=s,o}return _inherits(e,t),e}(f),c=function(t){function e(i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,i));return i.classList.add("wm-edit"),n}return _inherits(e,t),e}(C=function(t){function e(i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,i));return i.classList.add("wm-textbox"),n}return _inherits(e,t),e}(f)),_=function(t){function e(i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,i));return i.classList.add("wm-memo"),n}return _inherits(e,t),e}(C),d=function(t){function e(i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,i));return i.classList.add("wm-grp"),n}return _inherits(e,t),e}(o),w=function(t){function e(i){var n,s,r,o,l,u;_classCallCheck(this,e);var c=_possibleConstructorReturn(this,t.call(this,i));if(u=i.querySelectorAll(".wm-tab>li"),o=i.querySelectorAll(".wm-tabpage>li"),!u.length)return _possibleConstructorReturn(c);for(R(i.querySelector(".wm-tab"),"tablist"),E(u,"tab"),E(o,"tabpanel"),n=s=0,r=u.length;s<r;n=++s)l=u[n],o[n]&&function(t){l.addEventListener("click",function(){var e,i,n,s;for(i=s=0,n=u.length;s<n;i=++s)u[i],e=i===t,L(u[i],e),L(o[i],e)},!1)}(n);return L(u[0],!0),o[0]&&L(o[0],!0),c}return _inherits(e,t),e}(o),p=function(t){function e(i){return _classCallCheck(this,e),_possibleConstructorReturn(this,t.call(this,i,"footer"))}return _inherits(e,t),e}(o),x={".wm-lbl":v,".wm-btn,button":i,"input[type=checkbox]":s,"input[type=radio]":y,select:r,"input:not([type]),input[type=text],input[type=password],input[type=email]":c,textarea:_,fieldset:d,".wm-tabs":w,progress:m,".wm-footer":p},a=function(){function t(){_classCallCheck(this,t),this.lastIndex=0,this.map={},this.attr="data-fmap-"+Date.now()}return t.prototype.get=function(t){var e;return(e=t.getAttribute(this.attr))&&this.map[e]||null},t.prototype.set=function(t,e){var i;(i=t.getAttribute(this.attr))||(i=++this.lastIndex,t.setAttribute(this.attr,i)),this.map[i]=e},t}(),u=function(){function e(t,i){var s,r,o,l,u,c,h,p=this;for(h in _classCallCheck(this,e),this.owner=t,this.el=i,this.active=!1,this.centre=!0,this.map=new a,this.onResize=function(){p._autoMove()},R(i,t.modal?"alertdialog":"dialog"),i.addEventListener("mousedown",function(t){p._activate(t)},!1),new n(t,i).on("wm.close",function(){p.close()}),r=i.querySelector(".wm-body"),x)for(s=x[h],l=0,u=(c=r.querySelectorAll(h)).length;l<u;l++)o=new s(c[l]),this._accessData(o.el,o);this._setResizeListener(),this._autoMove(),i.classList.add("wm-shown")}return e.prototype.equals=function(t){return this.el.isSameNode(t.el)},e.prototype.close=function(){return this.owner._deleteDialog(this),t.removeEventListener("resize",this.onResize,!1),this},e.prototype.move=function(t,e){return this.centre=!1,this._setResizeListener(),this.owner._moveElement(this.el,t,e),this},e.prototype.resize=function(t,e){return this.owner._resizeElement(this.el,t,e),this._autoMove(),this},e.prototype.activate=function(){return this._activate(),this},e.prototype.find=function(t){var e;return(e=this.el.querySelector(t))&&this._accessData(e)},e.prototype.findAll=function(t){var e,i,n,s,r,o;for(o=[],n=0,s=(r=this.el.querySelectorAll(t)).length;n<s;n++)i=r[n],null!=(e=this._accessData(i))&&o.push(e);return o},e.prototype.bind=function(t,e,i){return this.findAll(t).forEach(function(t){t.on(e,i)}),this},e.prototype.unbind=function(t,e,i){return this.findAll(t).forEach(function(t){t.off(e,i)}),this},e.prototype._accessData=function(t,e){if(void 0===e)return this.map.get(t);this.map.set(t,e)},e.prototype._activate=function(t){this.owner._bringToTop(this,t)},e.prototype._isChildOrSelf=function(t){return this.el.isSameNode(t)||this.el.contains(t)},e.prototype._setState=function(t,e,i){var n;this.el.style.zIndex!==t&&(this.el.style.zIndex=t),this.active!==e&&(this.active=e,L(this.el,e),e&&(null!=i?i.target.focus():null!=(n=this.el.querySelector(".wm-ctl-form"))&&n.focus()))},e.prototype._autoMove=function(){this.centre&&this.owner._moveToCentre(this.el)},e.prototype._setResizeListener=function(){this.centre?t.addEventListener("resize",this.onResize,!1):t.removeEventListener("resize",this.onResize,!1)},e}(),t.Desktop=l}(window,document);
//# sourceMappingURL=wm.min.js.map
